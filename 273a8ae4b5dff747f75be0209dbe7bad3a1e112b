{
  "comments": [
    {
      "key": {
        "uuid": "36507ab0_09690b55",
        "filename": "playbooks/roles/jump-vm/tasks/main.yaml",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 7019
      },
      "writtenOn": "2020-11-12T16:08:23Z",
      "side": 1,
      "message": "If I understand correctly this is instruction is removing some lines from files so should be better to implement it with the [lineinfile module](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html)?",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 44,
        "endChar": 32
      },
      "revId": "273a8ae4b5dff747f75be0209dbe7bad3a1e112b",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "068fc214_701157b9",
        "filename": "playbooks/roles/jump-vm/tasks/main.yaml",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 7669
      },
      "writtenOn": "2020-11-12T16:24:28Z",
      "side": 1,
      "message": "I did a quick scan for any built-in module able to do this, but I didn\u0027t find anything good. What needs to be removed is an element potentially in an array, e.g:\n\n[\n  {\n    \"ip-address\": \"\u003cIP\u003e\",\n    \"mac-address\": \"\u003cMAC\u003e\",\n    \"hostname\": \"kuberef-jump\",\n    \"client-id\": \"\u003cID\u003e\",\n    \"expiry-time\": \u003cExpTime\u003e\n  }\n]\n\nIf this can be done in a nice way using lineinfile or another built-in I think that would be better than using \u0027shell\u0027, but it should do the trick for now (without removing unrelated entries as well)",
      "parentUuid": "36507ab0_09690b55",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 44,
        "endChar": 32
      },
      "revId": "273a8ae4b5dff747f75be0209dbe7bad3a1e112b",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "801823d0_7d94cbb2",
        "filename": "playbooks/roles/jump-vm/tasks/main.yaml",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 7019
      },
      "writtenOn": "2020-11-12T19:54:09Z",
      "side": 1,
      "message": "What about this implemtation?\n\n    - name: Remove line hostname\n      lineinfile:\n        path: /var/lib/libvirt/dnsmasq/virbr0.{{ item }}\n        state: absent\n        regexp: \u0027hostname\": \"{{ jumphost.name }}\",\u0027\n      with_items:\n       - status\n       - macs\n    - name: Remove line domain\n      lineinfile:\n        path: /var/lib/libvirt/dnsmasq/virbr0.{{ item }}\n        state: absent\n        regexp: \u0027domain\": \"{{ jumphost.name }}\",\u0027\n      with_items:\n       - status\n       - macs",
      "parentUuid": "068fc214_701157b9",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 44,
        "endChar": 32
      },
      "revId": "273a8ae4b5dff747f75be0209dbe7bad3a1e112b",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "647176d4_5a19217a",
        "filename": "playbooks/roles/jump-vm/tasks/main.yaml",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 585
      },
      "writtenOn": "2020-11-13T08:35:18Z",
      "side": 1,
      "message": "works for me.",
      "parentUuid": "801823d0_7d94cbb2",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 44,
        "endChar": 32
      },
      "revId": "273a8ae4b5dff747f75be0209dbe7bad3a1e112b",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0db45b2d_220dd598",
        "filename": "playbooks/roles/jump-vm/tasks/main.yaml",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 7669
      },
      "writtenOn": "2020-11-13T08:54:27Z",
      "side": 1,
      "message": "That will only remove the matching lines in the files, not the whole element in the list. I was looking into blockinfile too, but that doesn\u0027t seem to have great support for this operation either.",
      "parentUuid": "801823d0_7d94cbb2",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 44,
        "endChar": 32
      },
      "revId": "273a8ae4b5dff747f75be0209dbe7bad3a1e112b",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": true
    }
  ]
}